<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JS-tests</title>
    <link rel="stylesheet" href="../css/styles-common.css" />
    <!-- <link rel="stylesheet" href="../css/styles-5.css" /> -->
  </head>
  <body>
    <h1>Дата и время</h1>

    <h2>Создание</h2>

    <p>
      Для создания нового объекта Date нужно вызвать конструктор
      <b>new Date()</b> с одним из следующих аргументов:
    </p>

    <ul>
      <li>
        <b>new Date()</b> (Без аргументов) – создать объект Date с текущими
        датой и временем:
      </li>
      <li>
        <b>new Date(milliseconds)</b> Создать объект Date с временем, равным
        количеству миллисекунд (тысячная доля секунды), прошедших с 1 января
        1970 года UTC+0.
      </li>
      <li>
        <b>new Date(datestring)</b> Если аргумент всего один, и это строка, то
        из неё «прочитывается» дата. Нумерация месяцев с 1 до 12.
      </li>
      <li>
        <b>new Date(year, month, date, hours, minutes, seconds, ms)</b> Создать
        объект Date с заданными компонентами в местном часовом поясе.
        Обязательны только первые два аргумента.
        <ul>
          <li>year должен состоять из четырёх цифр.</li>
          <li>month начинается с 0 (январь) по 11 (декабрь).</li>
          <li>
            Параметр date здесь представляет собой день месяца. Если параметр не
            задан, то принимается значение 1.
          </li>
          <li>
            Если параметры hours/minutes/seconds/ms отсутствуют, их значением
            становится 0.
          </li>
        </ul>
      </li>
      <li></li>
    </ul>

    <p>
      Целое число, представляющее собой количество миллисекунд, прошедших с
      начала 1970 года, называется таймстамп (англ. <b>timestamp</b>). Датам до
      1 января 1970 будут соответствовать отрицательные таймстампы.
    </p>

    <h2>Получение компонентов даты</h2>

    <p>Существуют методы получения года, месяца и т.д. из объекта Date</p>

    <p>
      Методы, возвращающие значения в соответствии с местным часовым поясом:
    </p>

    <ul>
      <li><b>getFullYear()</b> - Получить год (4 цифры)</li>
      <li><b>getMonth()</b> - Получить месяц, от 0 до 11.</li>
      <li>
        <b>getDate()</b>
        - Получить день месяца, от 1 до 31, что несколько противоречит названию
        метода.
      </li>
      <li>
        <b>getHours(), getMinutes(), getSeconds(), getMilliseconds()</b>
        - Получить, соответственно, часы, минуты, секунды или миллисекунды.
      </li>
      <li>
        <b>getDay()</b>
        Вернуть день недели от 0 (воскресенье) до 6 (суббота). Несмотря на то,
        что в ряде стран за первый день недели принят понедельник, в JavaScript
        начало недели приходится на воскресенье.
      </li>
    </ul>

    <p>
      <b>getUTCFullYear(), getUTCMonth(), getUTCDay()</b> - UTC-варианты,
      возвращающие день, месяц, год для временной зоны UTC+0
    </p>

    <p>
      <b>getTime()</b> - Для заданной даты возвращает таймстамп – количество
      миллисекунд, прошедших с 1 января 1970 года UTC+0.
    </p>

    <p>
      <b>getTimezoneOffset()</b> - Возвращает разницу в минутах между UTC и
      местным часовым поясом
    </p>

    <h2>Установка компонентов даты</h2>

    <p>Следующие методы позволяют установить компоненты даты и времени:</p>

    <ul>
      <li>setFullYear(year, [month], [date])</li>
      <li>setMonth(month, [date])</li>
      <li>setDate(date)</li>
      <li>setHours(hour, [min], [sec], [ms])</li>
      <li>setMinutes(min, [sec], [ms])</li>
      <li>setSeconds(sec, [ms])</li>
      <li>setMilliseconds(ms)</li>
      <li>
        setTime(milliseconds) (устанавливает дату в виде целого количества
        миллисекунд, прошедших с 01.01.1970 UTC)
      </li>
    </ul>

    <p>
      Как мы видим, некоторые методы могут устанавливать сразу несколько
      компонентов даты, например: setHours. Если какая-то компонента не указана,
      она не меняется.
    </p>

    <p>
      У всех этих методов, кроме setTime(), есть UTC-вариант, например:
      setUTCHours().
    </p>

    <h3>Автоисправление даты</h3>
    <p>
      Автоисправление – это очень полезная особенность объектов Date. Можно
      устанавливать компоненты даты вне обычного диапазона значений, а объект
      сам себя исправит.
    </p>
    <div class="code">
      <i
        >let date = new Date(2013, 0, 32);
        <span class="comment"> // 32 Jan 2013 ?!? </span> </i
      ><br />
      <i>alert(date); <span class="comment"> // ...1st Feb 2013! </span> </i
      ><br />
    </div>

    <h2>Преобразование к числу, разность дат</h2>
    <p>
      даты можно вычитать, в результате получаем разность в миллисекундах. Этот
      приём можно использовать для измерения времени
    </p>

    <h2>Date.now()</h2>
    <p>
      Существует особый метод <b>Date.now()</b>, возвращающий текущую метку
      времени. <br />
      Семантически он эквивалентен <b>new Date().getTime()</b>, однако метод не
      создаёт промежуточный объект <b>Date</b>. Так что этот способ работает
      быстрее и не нагружает сборщик мусора.
    </p>

    <h2>Бенчмаркинг</h2>
    <p>
      вычисления, замеряющие производительность, называют «бенчмарками»
      (benchmark).
    </p>
    <p>
      Подробнее
      <a href="https://learn.javascript.ru/date#benchmarking">по ссылке</a>
    </p>
    <p>
      Порой нам нужно измерить время с большей точностью. Собственными
      средствами JavaScript измерять время в микросекундах (одна миллионная
      секунды) нельзя, но в большинстве сред такая возможность есть. К примеру,
      в браузерах есть метод
      <a href="https://developer.mozilla.org/ru/docs/Web/API/Performance/now"
        >performance.now()</a
      >, возвращающий количество миллисекунд с начала загрузки страницы с
      точностью до микросекунд (3 цифры после точки)
    </p>
    <p>
      В Node.js для этого предусмотрен модуль microtime и ряд других способов.
      Технически почти любое устройство или среда позволяет добиться большей
      точности, просто её нет в объекте Date.
    </p>

    <h2>Разбор строки с датой - Метод Date.parse(str)</h2>
    <p>Метод Date.parse(str) считывает дату из строки.</p>
    <p>Формат строки должен быть следующим: YYYY-MM-DDTHH:mm:ss.sssZ, где:</p>
    <ul>
      <li>YYYY-MM-DD – это дата: год-месяц-день.</li>
      <li>Символ "T" используется в качестве разделителя.</li>
      <li>HH:mm:ss.sss – время: часы, минуты, секунды и миллисекунды.</li>
      <li>
        Необязательная часть 'Z' обозначает часовой пояс в формате +-hh:mm. Если
        указать просто букву Z, то получим UTC+0.
      </li>
    </ul>
    <p>
      Возможны и более короткие варианты, например, YYYY-MM-DD или YYYY-MM, или
      даже YYYY.
    </p>
    <p>
      Вызов Date.parse(str) обрабатывает строку в заданном формате и возвращает
      таймстамп (количество миллисекунд с 1 января 1970 года UTC+0). Если формат
      неправильный, возвращается NaN.
    </p>

    <!-- templates: -->

    <!-- <div class="code">
      <i>code <span class="comment"> // comments </span> </i><br />
    </div> -->

    <!-- <ul>
      <li><b></b></li>
      <li>
        <b> </b>
      </li>
      <li><b></b></li>
      <li><b></b></li>
      <li><b></b></li>
      <li>
        <b></b>
      </li>
    </ul> -->

    <a href="../index.html" class="back-btn">back to main page</a>

    <script src="../js/script-17.js"></script>
  </body>
</html>
